#!/bin/sh
# invoked by $(top_srcdir)/autogen.sh in this directory

spew_twerp_stuff ()
{
stems=$1
echo ALL_TWERPS = `sed 's/$/.twerp/g' $stems`
sed 's,^\(.*\)$,\1.texi : \1.twerp,g' $stems
echo remove-twerp-shadowed-texi:
sed 's,^\(.*\)$,	rm -f $(distdir)/\1.texi,g' $stems
#               ^^^^^^^^ single embedded tab
}

prep_dummy_texi ()
{
stems=$1
for stem in `cat $stems` ; do
  texi=$stem.texi
  if [ ! -f $texi ] ; then
    echo '@setfilename guile-pg.info' > $texi
    touch -m -t 01010000 $texi
  fi
done
}

main ()
{
spew_twerp_stuff .twerp-list > twerp.mk-am-frag
prep_dummy_texi .twerp-list
}

main

# .make-automake-frags ends here
