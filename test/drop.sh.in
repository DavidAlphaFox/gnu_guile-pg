#!/bin/sh
# usage: drop.sh [--no-worries]

drop="@DROPDB@"

if [ -z "$drop" -o "$drop" = no ] ; then
    echo ERROR: no idea how to drop a database
    exit 1
fi
if [ -z "$PGDATABASE" ] ; then echo PGDATABASE not set. ; exit 1 ; fi

if [ x"$DEBUG" = x ] ; then
    $drop $PGDATABASE >/dev/null 2>&1
else
    test x"$1" = x--no-worries \
        && echo INFO: The following $drop command may display an error. \
        && echo INFO: That is normal and does not indicate a problem.
    echo $drop $PGDATABASE
    $drop $PGDATABASE
fi
rv=$?

# Sometimes PostgreSQL doesn't finish the drop.
# We give it a chance to do so w/ this kludge.
sleep 1

exit $rv

# drop.sh ends here
