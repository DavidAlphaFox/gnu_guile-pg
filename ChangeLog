2002-12-11  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c: Update copyright.
	No longer #include <postgres.h>.
	Include libpostgres.h using "" instead of <>.

	(rcsid): Delete.
	(ser_status_str_count): New var.
	(pg_guile_pg_rcsid): Delete.
	(str2symbol): New macro.
	(pg_result_status): Return symbol if available.

	* libpostgres_lo.c: Update copyright.

	(rcsid): Delete.
	(pg_guile_pg_lo_rcsid): Delete.
	(TTN_COERCE_INT): New macro.
	(lob_mklobport): Use SCM_INPUT_PORT_P instead of SCM_INPORTP.
	Use SCM_OUTPUT_PORT_P instead of SCM_OUTPORTP.
	Use TTN_COERCE_INT.
	(terminating): Make static.
	(lob_write): Use TTN_COERCE_INT.

	* scm/postgres.scm.in: Update copyright.
	Rework loading to use `make-app-module-loader' if available,
	emulating it if not.

	(pg-setdb): New export.
	(pg-guile-pg-module-rcsid, pg-guile-pg-rcsid): Delete.

	* scm/Makefile.am: Update copyright.

	(install-data-hook): New target.

	* test/basic-tests.sh, test/lo-tests.sh: Use dropdb if available,
	otherwise destroydb.
	No longer user guile-pg interpreter; instead use guile directly.

	* test/guile-pg-basic-tests.scm.in, test/guile-pg-lo-tests.scm.in:
	Update copyright.
	Use module (database postgres).
	Convert PGRES_foo references to symbols.

	* test/Makefile.am: Update copyright.
	(TESTS): Add alive.sh.
	(TESTS_ENVIRONMENT): New directive.

	* test/alive.sh: New file.

2002-12-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* acinclude.m4 (GUILE_MODULE): Delete.

	* configure.in: No longer use GUILE_MODULE.
	Instead, use GUILE_PROGS and GUILE_FLAGS.

2002-12-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* .cvsignore, doc/.cvsignore, scm/.cvsignore, test/.cvsignore:
	New files.

	* HACKING: Remove RCS tag.
	Refill.
	Add "Quick start" commands.
	Update "I" to "we".
	Remove hints available elsewhere.

	* README: Update tested PostgreSQL version number.
	Update bug report email address.

2002-12-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* guile-pg.h, guile-pg.c: Delete.

	* Makefile.am: Update copyright.
	(EXTRA_DIST): Add autogen.sh.
	(bin_PROGRAMS, guile_pg_SOURCES, guile_pg_LDADD, guile_pg_CFLAGS,
	guile_pg_LDFLAGS): Delete.
	(INCLUDES): Add "-I.".
	(pkglibversdir): New var.
	(pkglibvers_LTLIBRARIES): Renamed from `lib_LTLIBRARIES'.
	(.c.x): Update guile-snarf invocation to use "-o OUT IN" syntax.
	(CLEANFILES): New directive.

	* configure.in: Update copyright.
	(top_builddir_absolute): New var, AC_SUBST'd.
	(AC_INIT): Look for libpostgres.c instead of guile-pg.c.
	(AC_INIT_AUTOMAKE): Use version 0.07u8 to indicate "under development".

2002-12-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* acconfig.h, aclocal.m4, configure, Makefile.in, INSTALL, ANNOUNCE,
	config.guess, config.h.in, config.sub, install-sh, ltmain.sh,
	missing, mkinstalldirs, stamp-h.in, doc/Makefile.in, doc/texinfo.tex,
	scm/Makefile.in, test/Makefile.in: Delete.

	* autogen.sh: Take "--libtoolize" option;
	conditionalize libtoolize invocation.
	Pass "-I ." to aclocal.
	Pass "--force" to automake.
	Record dev box tool versions in comment.

2000-06-20  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* libpostgres.c: Fixed use of soon-to-be-deprecated
	  scm_make_smob_type_mfpe.

2000-06-15  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* libpostgres.c: Fixed use of deprecated scm_smobfuns struct.

	* libpostgres.c configure.in doc/guile-pg.texi
	  test/guile-pg-basic-tests.scm.in: Added pg-oid-value function.

2000-06-02  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* ANNOUNCE: New file.

	* Bumped libtool interface number to 2 prior to release.

	* Printing a large object port now gives information about the
	  libpq file descriptor, the OID and the database connection to
	  which the port applies.

	* Fixed buffer overflow in print methods for connection and
	  results smobs.

	* Fixed fill_input bug and lob_printp of closed port.

	* Added test case for read-line (would've caught fill_input bug)

	* Changed libtool to new version 1.3.5

	* Updated autogen.sh

2000-05-30  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* Fixed large object ports so that they work with the further
	  changes to the ports interface.

	  Note: because of this, guile-pg no-longer builds with guile
	  versions prior to 1.3.4

	* Changed all function names from pg:name to pg-name.  This
	  removes the need for a hacked texi2html so that is now gone.

	* Removed pq-setdb  entirely.  It has been replaced by
	  pq-connectdb which is much more flexible.

	* Changed the installation directory of libpostgres.so.  This
	  used to be in an architecture dependent subdirectory, with a
	  symbolic link from an architecture-independent directory, but
	  this was still not compatible with multiple architectures.
	  Instead we install the .so in the $(library) directory and
	  load it explicitly using the scheme interface to dlopen etc.

	* As part of the above, the module is now loaded using

	         (use-modules (database postgres))

	* Addded procedure pg-guile-pg-loaded.  This is a marker, the
	  presence of which guarantees that guile-pg is present.  This
	  is tested in postgres.scm to see whether the guile is plain
	  guile or the statically-linked guile-pg.

	* Updated README

	* Added <Dollar>Id<Dollar> all over the place in preparation
	  for CVS use.  Also added PG-MODULE-RCSID procedure to get
	  the RCS Id of the scheme module (postgres.scm).

1999-06-27  Ian Grant  <Ian.Grant@cl.cam.ac.uk>
	* Changes to configure.in to check for Postgres 6.4 features.

	* Changes to libpostgres.c to conditionally compile procedures
	  depending on post 6.4 functionality in libpq.

	* Split libpostgres.c into two files. Added libpostgres_lo.c
	  containing the large object code.

	* Changes to libpostgres_lo.c to deal with Guile's new ptobfuns
	  interface. Changes to configure.in to detect the new ptobfuns
	  interface.

1999-01-31  Ian Grant  <Ian.Grant@cl.cam.ac.uk>
	* Changes to work with libpq from PostgreSQL 6.4.2 these were:

	* libpostgres.c: Added new primitives pg:binary-tuples? and pg:fmod.
	  Changed pg:error-message to work with either a PG-CONN or a
	  PG-RESULT object, calling PQresultErrorMessage in the latter case

	  Changed pg:getvalue to work with binary data. Now PQbinaryTuples
	  is called to check whether the returned value is binary and
	  if it is a string of the appropriate length is returned.

	  Changed pg:putline so that it actually calls PQputnbytes with
	  the correct length. This works with null-terminated strings
	  as it did before, but now works with strings containing embedded
	  nulls as well.

	* Makefile.am: Added -lcrypt to the dependency list for libpostgres.so
	  This is actually wrong though: -lcrypt should only be linked if
	  necessary, since it doesn't exist on some systems. We need to
	  check whether or not it exists in configure.in and only if does
	  should we include it. I don't have enough brains to do this
	  right now though.

1999-01-24  Ian Grant  <Ian.Grant@cl.cam.ac.uk>
	* HACKING: New File.

	* README: Added info on building guile-pg and intalling
	  PostgreSQL from the Red Hat RPMS.

	* test/guile-pg-basic-tests.scm: New file. Uses testing.scm in the
	  same directory.

	* test/guile-pg-lo-tests.scm: New file. Uses testing.scm in the
	  same directory.

	* Makefile.am, configure.in: Added test subdirectory.

1999-01-17  Ian Grant  <I.A.N.Grant@damtp.cam.ac.uk>
	* acinclude.m4: Added new macro definition GUILE_MODULE
	  which sets up the necessary install targets for a guile
	  module. It gets these from guile-config.

	* configure.in: Changed to use GUILE_MODULE.

	* libpostgres.c: Changed all scheme i/f functions to use
	  guile-snarf to make libpostgres.x

	* Makefile.am: Added lines to allow .x in .deps and to run
	  guile-snarf to create the .x files when necessary.

	* libpostgres.c: Added pg:reset and pg:trace and pg:untrace

1999-01-12  Ian Grant  <I.A.N.Grant@damtp.cam.ac.uk>
	* libpostgres.c: Completed large obect support

	* libpostgres.c: Added support for PQputline/PQgetline/PQendcopy

	* doc/guile-pg.texi: Function descriptions

1998-12-05  Ian Grant  <I.A.N.Grant@damtp.cam.ac.uk>
	* libtoolized

	* acinclude.m4: new file defining PQ library autoconf macro

1998-12-03  Ian Grant  <I.A.N.Grant@damtp.cam.ac.uk>
	* AUTHORS: New file, in accordance with the GNU maintainers'
	standards.

	* README: New file, in accordance with the GNU maintainers'
	standards.

	* Makefile.am: New file for automake.

	* configure.in and friends: new files for autoconf.
