2004-06-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres.scm.in: Delete file.

	* scm/Makefile.am (guile_postgres_generated): Delete var.
	(d_DATA): Delete $(guile_postgres_generated).
	(EXTRA_DIST): Delete postgres.scm.in.
	(install-data-hook): In any postgres.scm from $(ddir).

	* configure.in (AC_CONFIG_FILES): Remove scm/postgres.scm.

	* libpostgres.c (scm_init_database_postgres_module):
	Rename from `scm_init_database_postgres_sup_module'.

	* Makefile.am
	(d_LTLIBRARIES): Add postgres.la. Remove postgres-sup.la.
	(postgres_sup_la_SOURCES): Delete.
	(postgres_sup_la_LDFLAGS): Delete.
	(postgres_la_SOURCES): New var/directive.
	(postgres_la_LDFLAGS): New var/directive.
	(install-data-hook): Delete any postgres-sup.* files in $(ddir).
	(DOTDOCFILES): Remove scm/postgres.doc.

2004-06-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_oid_status): Delete PG_DEFINE func.

	* doc/guile-pg.twerp (Processing Results): Remove @twerpdoc
	and associated "deprecated" blurb for `pg-oid-status'.

2004-06-23  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in: Use macro GUILE_C2X_METHOD.

2004-06-23  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_guile_pg_version): Delete PG_DEFINE func.

	* scm/postgres.scm.in (pg-guile-pg-module-version): Delete proc.
	(pg-guile-pg-module-config-stamp): Likewise.

	* doc/guile-pg.twerp (Miscellaneous): Remove @twerpdoc for
	`pg-guile-pg-version', `pg-guile-pg-module-version' and
	`pg-guile-pg-module-config-stamp', as well as intro blurb.

2004-06-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* HACKING: Mention .last-release file.
	Use "1.4.1.x series" instead of "1.4.1.93".

2004-06-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* guile.m4.snap: New file.

	* autogen.sh: Consider guile.m4.snap as guile.m4.
	For aclocal(1), specify cwd as include dir.

2004-06-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* autogen.sh: Emit warning if modsup.h.snap is out of date.

2004-06-17  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* modsup.h.snap: New file.

	* autogen.sh: Add guile to tools versions (for modsup.h).
	If guile cannot supply modsup.h, use modsup.h.snap.

2004-06-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "0.20" for release.

2004-06-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c
	(strip_newlines): Fix OBOE: Correctly compute string length.
	(pg_connectdb): Fix liveness bug: Call `PQerrorMessage'
	before `PQfinish' to avoid accessing stale `dbconn' storage.

2004-06-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (CLEANFILES): Add $(noinst_DATA).

2004-06-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (twerp-prep): For this AC_CONFIG_COMMANDS
	entry, fix skew bug: look for command `prep-Ptexi'.

2004-06-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (postgres_sup_la_LDFLAGS): Bump version info to "6:1:4".

2004-06-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres_lo.c (lob_stream): Rename struct field `fd' to `alod'.
	Update all usage sites.
	(lob_mklobport): Use var name "alod" instead of "fd".
	(lob_lo_creat): Likewise.
	(lob_lo_open): Likewise.

2004-06-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp: In program fragments,
	use `format' instead of `write-line'.

2004-06-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* autogen.sh: Update libtool version; nfc.

2004-06-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/.make-automake-frags (TAB): Delete var.
	(spew_twerp_stuff): Rewrite.

	* configure.in (twerp-prep): For this AC_CONFIG_COMMANDS entry, use
	contents of $srcdir/doc/.twerp-list instead of hardcoding stems.

2004-06-14  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp (Writing/Reading Data): In example, use
	module (ice-9 rdelim), and replace "if + begin" with cond.

2004-05-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres_lo.c (lob_mklobport): Move `pt->read_buf'
	to head of chained assignment to avoid compiler warning.

2004-05-17  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (strip_newlines): Do not modify `str'.

2004-05-17  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (strip_newlines): Use `scm_makfromstr'.
	Update callers to no longer use `strdup' and `free'.

2004-05-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp (Column Definitions): Fix typo.

	* scm/postgres-col-defs.scm: Doc munging; nfc.

2004-05-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm (defs-from-psql): When
	reading type options, consider all #\, as #\space.

2004-05-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "0.19" for release.

2004-05-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* acinclude.m4 (AC_GUILE_PG_FCOMPAT): Use 3-arg `AC_DEFINE'
	instantiation variant instead of 1-arg variant.

2004-05-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (c2x): Add check for which method to use.
	* Makefile.am (.c.x): Use $(c2x).

2004-03-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "0.18" for release.

2004-03-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (INCLUDES): Add -I$(srcdir).
	(pre-inst.merged-module-catalog): Conditionalize.
	Add preference for "guile-tools mkpimmc".
	Add "echo ... > $@" fallback.

2004-03-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (postgres_sup_la_LDFLAGS): Bump -version-info to "6:0:4".

2004-03-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres_lo.c: Use ~S in `scm_misc_error' format string.

2004-03-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres_lo.c (lob_lo_unlink):
	Fix bug: Return #f only on error.

2004-03-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp (Legalities): Update.

2004-03-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (goodies): New file-static var.
	(pg_guile_pg_loaded): Return `goodies'.
	(pg_get_pass) [HAVE_PQPASS]: Convert from conditional definition
	to unconditional definition w/ conditional return value.
	(pg_backend_pid) [HAVE_PQBACKENDPID]: Likewise.
	(pg_oid_value) [HAVE_PQOIDVALUE]: Likewise.
	(pg_binary_tuples) [HAVE_PQBINARYTUPLES]: Likewise.
	(pg_fmod) [HAVE_PQFMOD]: Likewise.
	(SIMPLE_SYMBOL, SYM): New macros.
	(pg_sym_PQPASS) [HAVE_PQPASS]: New SIMPLE_SYMBOL.
	(pg_sym_PQBACKENDPID) [HAVE_PQBACKENDPID]: Likewise.
	(pg_sym_PQOIDVALUE) [HAVE_PQOIDVALUE]: Likewise.
	(pg_sym_PQBINARYTUPLES) [HAVE_PQBINARYTUPLES]: Likewise.
	(pg_sym_PQFMOD) [HAVE_PQFMOD]: Likewise.
	(init_module): Initialize `goodies'.

2004-03-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (CREATEDB): New AC_CHECK_PROGS var.
	Warn if createdb not found.
	(AC_CONFIG_FILES): Add test/drop.sh and test/create.sh.
	(chmod-plus-x): Also chmod test/drop.sh and test/create.sh.

2004-03-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (DROPDB): New AC_CHECK_PROGS var.
	Warn if neither dropdb nor destroydb is found.

2004-03-20  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c: Move #define and #undef
	FUNC_NAME inside func body; nfc.
	* libpostgres_lo.c: Likewise.

2004-03-20  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_set_client_encoding_x): Hse `ROZT'.
	(pg_send_query): Likewise.

2004-03-20  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (DIFF_PATH): Delete AC_SUBST var.

2004-03-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_sym_envvar): Delete symbol.
	(pg_sym_compiled, pg_sym_val, pg_sym_label,
	pg_sym_dispchar, pg_sym_dispsize): Likewise.
	(SIMPLE_KEYWORD, KWD): New macros.
	(kwd_envvar): New keyword.
	(kwd_compiled, kwd_val, kwd_label,
	kwd_dispchar, kwd_dispsize): Likewise.
	(pg_conndefaults): Use keywords instead of symbols.

2004-03-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.h (scm_extended_dbconn): Rename to `xc_t'.
	(scm_extended_result): Move to libpostgres.c.
	(guile_pg_sec_p): Rename to `xc_p'.
	(guile_pg_sec_unbox): Rename to `xc_unbox'.

	* libpostgres.c (guile_pg_sec_p): Rename to `xc_p'.
	(sec_p): Delete macro.
	(guile_pg_sec_unbox): Rename to `xc_unbox'.
	(sec_unbox): Delete macro.
	(sec_box): Rename to `xc_box'.
	(sec_display): Rename to `xc_display'.
	(sec_mark): Rename to `xc_mark'.
	(sec_free): Rename to `xc_free'.
	(xr_t): New struct typedef, from libpostgres.h.
	(ser_p): Rename to `xr_p'.
	(ser_unbox): Rename to `xr_unbox'.
	(ser_box): Rename to `xr_box'.
	(ser_display): Rename to `xr_display'.
	(ser_mark): Rename to `xr_mark'.
	(ser_free): Rename to `xr_free'.
	(make_ser): Rename to `make_xr'.

	* libpostgres_lo.c (sec_p): Delete macro.
	(sec_unbox): Likewise.

2004-03-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.h (ROZT_X, ROZT): New macros.

	* libpostgres.c (maybe_strcpy): Delete func.
	Rework callers to use `ROZT_X' and `ROZT'.
	(strip_newlines): Return SCM string. Update callers.
	(pg_getlineasync): Fix bug: Use SCM_ROCHARS.
	(pg_putline): Likewise.

	* libpostgres_lo.c (lob_lo_creat): No longer unconditionally
	coerce substring.  Instead, use `ROZT_X' and `ROZT'.
	(lob_lo_open): Likewise.
	(lob_lo_import): Likewise.
	(lob_lo_export): Likewise.

2004-03-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* gpl-text.c, gpl-text.scm: Delete files.

2004-03-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp (Retrieving Data): Add menu.
	Move non-intro text into children nodes.
	(Synchronous Retrieval): New node/section.
	(Asynchronous Retrieval): Likewise.
	(Processing Results): Likewise.

2004-03-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostres_lo.c (XCONN): New macro. Use throughout.

	* libpostgres.c (XCONN, RESULT): New macros. Use throughout.
	(pg_putline) [!HAVE_PQPUTNBYTES]: Use `maybe_strcpy'.
	(pg_set_client_encoding_x): Use `maybe_strcpy'.

2004-03-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (make_ser): New static func.
	(pg_exec): Use `make_ser'.
	(pg_send_query): New PG_DEFINE func.
	(pg_get_result): Likewise.
	(pg_consume_input): Likewise.
	(pg_is_busy_p): Likewise?
	(pg_request_cancel): Likewise.

2004-03-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (strip_newlines): Rewrite.

2004-03-18  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (QUERY_BUF_LEN): Delete macro.
	(strncpy0): Delete decl and func.
	(maybe_strcpy): New static decl and func.
	(pg_connectdb): Use `maybe_strcpy' and dynamic memory
	allocation instead of `strncpy0' and function-static buffers.
	(pg_exec): Likewise.
	(pg_error_message): Likewise.
	(pg_fnumber): Likewise.

2004-03-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-table.scm (pgtable-manager): Make
	returned proc also accept keyword for `choice'.
	(pgtable-worker): New proc, exported.

	* doc/guile-pg.twerp (Single-Table Abstraction):
	Mention views in intro.
	Add @twerpdoc for `pgtable-worker'.

2004-02-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm (*class-defs*): Update, from PostgreSQL 7.3.5.

2004-02-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm (check-def/elaborate): Delete.
	(strictly-check-defs/elaborate!): Likewise.
	(check-type/elaborate): New proc, exported.
	(strictly-check-types/elaborate!): Likewise.

	* doc/guile-pg.twerp (Introspection): Add @twerpdoc entries and
	related blurbs for `defs-from-psql', `check-type/elaborate' and
	`strictly-check-types/elaborate!'.  Also, add example.

2004-02-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm (defs-from-psql): Take additional arg `psql'.

2004-02-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm: Use module (database postgres-col-defs).
	Autoload (srfi srfi-13) instead of using it directly.
	Add autoload for module (ice-9 popen).
	(defs-from-psql): New proc, exported.
	(check-def/elaborate): Likewise.
	(strictly-check-defs/elaborate!): Likewise.

2004-02-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-types.scm (real): New built-in type converter.

2004-02-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm (put, get): Delete aliases.
	(describe-table!): Use `pg-print' instead of `describe-table'.
	(display-table): Delete proc.

2004-02-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm (*class-defs*): New var.
	(*table-info-selection*): New var.
	(make-M:pg-class): Use `*class-defs*'.
	(table-info): Use `*table-info-selection*'.

2004-02-11  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_getline): Doc munging; nfc.
	(pg_getlineasync): New PG_DEFINE func.

	* doc/guile-pg.twerp (Retrieving Data): Also mention `pg-getlineasync'.
	(Writing/Reading Data): Add intro blurb re need to
	call `pg-endcopy'.  Add @twerpdoc for `pg-getlineasync'.

2004-02-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* ltconfig: Delete.

2004-02-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_sym_envvar): New global var.
	(pg_sym_compiled, pg_sym_val, pg_sym_label,
	pg_sym_dispchar, pg_sym_dispsize): Likewise.
	(pg_conndefaults): New PG_DEFINE func.

	* doc/guile-pg.twerp (Database Connections): Mention default
	values in blurb.  Add @twerpdoc for `pg-conndefaults'.

2004-02-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c: Curly-brace placement munging; nfc.
	* libpostgres_lo.c: Likewise.

2004-02-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-table.scm (def:col-name): Delete unused alias.
	Also, no longer re-export proc.
	(def:type-name): No longer re-export proc.
	(def:type-options): Likewise.

2004-02-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (MD5SUM_PATH): Delete unused AC_PATH_PROG.

2004-02-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (cvs-state-summary): New target, when MAINTAINER_MODE.

2004-02-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* autogen.sh: Update autoconf version; nfc.

2004-02-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres.scm.in (PGRES_EMPTY_QUERY): Delete var.
	(PGRES_COMMAND_OK, PGRES_TUPLES_OK, PGRES_COPY_OUT,
	PGRES_COPY_IN, PGRES_BAD_RESPONSE, PGRES_NONFATAL_ERROR,
	PGRES_FATAL_ERROR): Likewise.

2004-02-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "0.17" for release.

2004-02-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* guile-pg.project (location, status): Update.

2004-02-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (EXTRA_DIST): Add modsup.h.

2004-02-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-table.scm (compile-outspec): Export.

2004-02-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* README: Rewrite.

2004-02-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (destroy-nonmodule-guile-pg-prior-install): New target.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp:
	No longer call the document "Command Reference".
	Instead, use "The (database postgres*) Modules".
	(Top): Rewrite intro blurb.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (postgres_sup_la_LDFLAGS): Update version info.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/Makefile.am (guile_pg_TEXINFOS):
	Remove version.texi. Add guile-pg.texi.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp (Miscellaneous): Replace @deffn with
	@twerpdoc for `pg-guile-pg-loaded', `pg-guile-pg-version',
	`pg-guile-pg-module-version' and `pg-guile-pg-module-config-stamp'.
	Mention that the latter three will not be included in 1.0 release.

	* Makefile.am (DOTDOCFILES): Add scm/postgres.doc.

	* scm/postgres.scm.in (pg-guile-pg-module-version):
	Add doc-comment; nfc.
	(pg-guile-pg-module-config-stamp): Likewise.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (AC_DISABLE_STATIC): New macro call.
	(GUILE_SITE_DIR): Likewise.
	(GUILE_LIBSITE_DIR): Likewise.

	* Makefile.am (pkglibversdir): Delete var.
	(pkglibvers_LTLIBRARIES): Delete automake directive.
	(libpostgres_la_SOURCES): Likewise.
	(libpostgres_la_LDFLAGS): Likewise.
	(ddir): New var.
	(d_LTLIBRARIES): New automake directive.
	(postgres_sup_la_SOURCES): Likewise.
	(postgres_sup_la_LDFLAGS): Likewise.
	(install-data-hook): New target.

	* scm/Makefile.am: Update copyright.
	(subpkgdatadir): Delete var.
	(subpkgdata_DATA): Delete automake directive.
	(ddir): New var.
	(d_DATA): New automake directive.
	(install-data-hook): Rewrite action:
	No longer textually modify/re-install postgres.scm.  Instead,
	do "guile-tools make-module-catalog" if that tool is available.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to "0.16.31415.1" for hacking.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* ANONCVS: New file.
	* Makefile.am: Update copyright.
	(EXTRA_DIST): Add ANONCVS.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp (Database Connections): Add section and @twerpdoc
	entries for `pg-client-encoding' and `pg-set-client-encoding!'.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp: Use "Guile-PG" everywhere, sans @code{}.
	(er): Add this @defcodeindex.
	(Top): Add to menu "Error Index".
	(Database Connections): Add @erindex entries and blurbs.
	(Writing/Reading Data): Likewise.
	(Large Objects): Likewise.
	(Miscellaneous): Likewise.
	(Error Index): New node.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_encoding_to_char): Add extern func decl.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_client_encoding): New PG_DEFINE func.
	(pg_set_client_encoding_x): Likewise.

2004-02-01  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-table.scm (select-cmd): Delete proc.
	(compile-outspec): New proc, exported.
	(select-proc): Rewrite to use `compile-outspec'.
	(pgtable-manager): Doc munging; nfc.

	* doc/guile-pg.twerp (Single-Table Abstraction):
	Add @twerpdoc for `compile-outspec'.

2004-01-31  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-table.scm (select-cmd): Take additional
	caller-allocated arg `obh-box', a list.  For symbolic
	selections, either singular or a list, pass back through the
	`obh-box' the ordered list of objectifier procs associated with
	the selection type(s).
	(select-proc): Update call to `select-cmd'.  Capture `pg-exec'
	return value and set its `objectifier-hints' property to the
	list computed by `select-cmd', or #f.
	(pgtable-manager): For `tuples-result->object-alist' and
	`tuples-result->object-alists', prefer the result's
	`objectifier-hints' property if available, over the full
	list of objectifiers.

2004-01-31  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm (put, get): New aliases.
	* scm/postgres-table.scm: Likewise.
	* scm/postgres-types.scm: Likewise.

2004-01-25  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* acinclude.m4: Update copyright.
	(AC_GUILE_PG_FCOMPAT): New AC_DEFUN.

	* configure.in: Update copyright.
	(AC_GUILE_PG_FCOMPAT): New macro call.
	(AH_BOTTOM): Add `scm_protect_object' redefinition
	conditional on HAVE_SCM_GC_PROTECT_OBJECT.

2004-01-25  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_notifies): New PG_DEFINE func.

	* doc/guile-pg.twerp (Database Connections): Add @section headers.
	Add @twerpdoc for `pg-notifies'.

2004-01-25  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c: Update copyright.
	(pg_connectdb): Doc fix; nfc.
	(pg_cmdtuples): Doc munging; nfc.

	* libpostgres_lo.c: Update copyright.
	(lob_lo_get_connection): Doc fix; nfc.
	(lob_lo_get_oid, lob_lo_tell, lob_lo_seek,
	lol_lo_import, lol_lo_export): Likewise.

2004-01-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-meta.scm (describe-table!):
	Use `display' and `newline' instead of `write-line'.

2004-01-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres-col-defs.scm: Update copyright.
	Use "#:" in `define-module' form.
	* scm/postgres-meta.scm: Likewise.
	* scm/postgres-resx.scm: Likewise.
	* scm/postgres-table.scm: Likewise.
	* scm/postgres-types.scm: Likewise.

	* doc/guile-pg.twerp: Update copyright.
	Use "#:" in `use-modules' forms.

2003-12-29  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.h (scm_extended_dbconn): Add member `SCM notice'.

	* libpostgres.c (sec_mark): Also mark `sec->notice'.
	(notice_processor): New static func.
	(pg_connectdb): Init `sec->notice'.
	Also, set connection's notice processor.
	(pg_set_notice_out_x): New `PG_DEFINE' func.

	* doc/guile-pg.twerp (Database Connections): Add blurb about notices.
	Also, add @twerpdoc for `pg-set-notice-out!'.

2003-11-27  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* scm/postgres.scm.in: Use module (database postgres-sup).
	No longer manually load the shared object library.  Instead,
	replace public interface w/ that of module (database postgres-sup),
	and delete all the now-defunct `export' forms.

2003-11-27  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* bugtest/testloseek.scm (pg-exec-cmd): Use symbol
	`PGRES_COMMAND_OK' instead of variable by same name.

2003-11-26  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (init_module): Rename from `init_postgres'.
	Make static.
	(scm_init_database_postgres_sup_module): Rename from
	`scm_init_database_interface_postgres_module'.
	Re-implement as macro call to `GH_MODULE_LINK_FUNC'.

2003-11-26  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* autogen.sh: Update tool version comments.
	Use "guile-config info datadir" to compute aclocal include dir.
	Append override for macro `_LT_AC_TAGCONFIG' to aclocal.m4.
	Add symlinking of modsup.h.
	Add creation of .last-release file.

	* configure.in: Add check for <guile/modsup.h>.
	(AH_BOTTOM): New directive.
	(AC_CONFIG_FILES): Add wily-guile.
	(module-catalog-prep): New AC_CONFIG_COMMANDS block.
	(chmod-plus-x): New AC_CONFIG_COMMANDS block.

	* wily-guile.in: New file.

	* Makefile.am (noinst_DATA): New directive.
	(pre-inst.merged-module-catalog): New target.

2003-11-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (MKDEP): Delete this undocumented directive.

2003-11-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (libpostgres_la_SOURCES):
	Remove libpostgres.x and libpostgres_lo.x.

2003-10-16  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/Makefile.am (.twerp.texi):
	Use "guile-tools" instead of "$(GUILE_TOOLS)".

2003-10-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_fname, pg_ftype, pg_fsize, pg_fmod):
	Use ~S instead of %s in format string.  Thanks to Joost Helberg.

2003-09-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* doc/guile-pg.twerp: Add "@paragraphindent 0"
	directive in header block.

2003-09-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* tmpfile.h, tmpfile.c: New files.

	* AUTHORS: Mention tmpfile.h and tmpfile.c.

	* Makefile.am (libpostgres_la_SOURCES): Add tmpfile.c.

	* libpostgres.c: If HAVE_TMPFILE not defined,
	also #include "tmpfile.h" and define `tmpfile'
	to expand to `guile_pg_tmpfile'.
	(pg_print): Remove "undefined" branch of HAVE_TMPFILE,
	since we will always have `tmpfile' available.
	Add check for NULL `fout'; call `scm_syserror' in that case.
	Remove dire warnings from docstring.

2003-09-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (twerp-prep): For this AC_CONFIG_COMMANDS entry,
	use "prep-Ptexi" instead of "twerp2texi --prep".

2003-09-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in: Add "AC_CHECK_FUNCS(tmpfile)".

	* libpostgres.c (pg_print): When cpp macro HAVE_TMPFILE is defined,
	pass a temporary `FILE *' to `PQprint', read it out again and
	send a freshly constructed scheme string to the current output port.

2003-09-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (.doc-index): Use "make-twerp2texi-index"
	instead of "twerp2texi --make-index".
	(.c.x): Use "guile-tools c2x" instead of "guile-snarf".
	(.c.doc): Use "guile-tools" instead of "$(GUILE_TOOLS)".
	(.scm.doc): Likewise.

2003-08-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* configure.in (VERSION): Bump to 0.16 for release.

2003-08-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* autogen.sh: Also pass "-I $HOME/local/share/aclocal" to aclocal.

2003-08-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* guile-pg.project (authors): Expand ttn email addr.

2003-08-13  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostres.c (pg_print): Expand docstring; nfc.

2003-08-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_make_print_options): Doc fix; nfc.
	(pg_print): If `options' is not specified (undefined), set
	it to a pg-print-option object derived from the '() spec.

2003-08-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* AUTHORS: Mention doc/guile-pg.texi
	explicitly (it was folded into doc/guile-pg.twerp).

2003-08-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* README: Mention test/show-platform and how to use it.

2003-08-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* libpostgres.c (pg_make_print_options):
	Add newline in docstring; nfc.

	* doc/guile-pg.twerp: Fix typo.

2003-08-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* THANKS: Add Russ McManus (moved from AUTHORS).
	* AUTHORS: Rewrite.

	* gpl-text.scm, gpl-text.c: Update copyright. Remove author blurb.

	* libpostgres.c, libpostgres.h, libpostgres_lo.c,
	scm/Makefile.am, scm/postgres.scm.in:
	Separate author and copyright comments; nfc.

2003-01-30  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c (sepo_type_tag, default_print_options,
	valid_print_option_flags, valid_print_option_keys): New static vars.
	(sepo_p, sepo_box, sepo_unbox, sepo_mark, sepo_free,
	sepo_display): New static funcs.
	(pg_sym_header, pg_sym_no_header, pg_sym_align, pg_sym_no_align,
	pg_sym_standard, pg_sym_no_standard, pg_sym_html3, pg_sym_no_html3,
	pg_sym_expanded, pg_sym_no_expanded, pg_sym_field_sep, pg_sym_table_opt,
	pg_sym_caption, pg_sym_field_names): New global vars.
	(pg_make_print_options, pg_print): New PG_DEFINE funcs.
	(init_postgres): Add init for sepo smob and valid_print_option_*
	vars.

	* scm/postgres.scm.in (pg-make-print-options, pg-print): New exports.

	* doc/guile-pg.twerp (Writing/Reading Data): Add info on
	pg-print and pg-make-print-options.

2003-01-15  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 0.15 for release.

2003-01-15  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/guile-pg.twerp (Column Definitions): New node/chapter.
	(Result Transforms): New node/chapter.
	(Single-Table Abstraction): Move some things to new nodes.
	(Introspection): Add `@twerpdoc (infer-defs)'.

2003-01-15  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-meta.scm: Use module (database postgres-resx).
	(table-fields-info): First arg now a conn object.
	(OLD-fields-as-scheme-defs, col-alist->alist-tuples): Delete.
	(infer-defs): Rename from fields-as-scheme-defs; rewrite; export.
	(display-table): Reorg; nfc.

2003-01-14  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-table.scm: Use modules (database
	postgres-col-defs) and (database postgres-resx).

	(def:col-name, def:type-name, def:type-options):
	Remove from Commentary, but continue to export.
	(pgtable-manager): Use `result->object-alist'
	and `result->object-alists'; nfc.

2003-01-14  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-col-defs.scm: New file.
	* scm/postgres-resx.scm: New file.
	* scm/Makefile.am (guile_postgres_sources): Add
	postgres-col-defs.scm and postgres-resx.scm.

	* Makefile.am (DOTDOCFILES): Add scm/postgres-col-defs.doc
	and scm/postgres-resx.doc.

2003-01-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-table.scm (pgtable-manager): First arg can now
	be an empty string, a space-separated "var=val" string, or a pg
	connection.

2003-01-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c (pg_connection_p): New PG_DEFINE function.
	* Makefile.am (libpostgres_la_LDFLAGS): Update vers to "4:0:2".
	* scm/postgres.scm.in (pg-connection?): Export.

	* doc/guile-pg.twerp (Database Connections): Add intro blurb.
	Also, add directive for `pg-connection?'.

2002-12-29  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (AC_CONFIG_FILES): Delete test/guile-pg-basic-tests.scm
	and test/guile-pg-lo-tests.scm.  Add test/config.scm.

2002-12-27  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 0.14 for release.

2002-12-27  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c (guile_pg_sec_p): Rename from `sec_p'.
	(guile_pg_sec_unbox): Rename from `sec_unbox'.
	* libpostgres.h: Likewise.

	* libposgres_lo.c (sec_p, sec_unbox): New macros.

2002-12-27  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (AC_CONFIG_COMMANDS):
	Conditionalize twerp2texi invocation.

2002-12-26  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c (sec_box, ser_p, ser_unbox, ser_box): Make static.
	* libpostgres.h (sec_box, ser_p, ser_unbox, ser_box): Remove decls.

2002-12-26  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-meta.scm: New file.
	* scm/Makefile.am (guile_postgres_sources): Add postgres-meta.scm.

	* doc/guile-pg.twerp (Introspection): New node/chapter.

	* Makefile.am (DOTDOCFILES): Add scm/postgres-meta.doc.

2002-12-26  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-types.scm (name, aclitem, aclitem[]):
	New built-in type converters.

2002-12-25  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c (pg_result_p): New PG_DEFINE func.
	* Makefile.am (libpostgres_la_LDFLAGS): Update vers to "3:0:1".

	* scm/postgres.scm.in (pg-result?): Export.

	* doc/guile-pg.twerp (Retrieving Data):
	Add intro blurb and twerpdoc for `pg-result?'.

2002-12-23  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 0.13 for release.

2002-12-23  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/cov: Use "PG_DEFINE" instead of "SCM_PROC".

2002-12-23  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* HACKING: Mention twerp2texi requirement for docs maintenance.

2002-12-22  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/.twerp-list: New file.
	* doc/.make-automake-frags: New script.
	* doc/guile-pg.twerp: New file.

	* libpostgres.h (PG_DEFINE): New macro.
	* libpostgres.c: Replace SCM_PROC with PG_DEFINE.
	Use FUNC_NAME in function bodies.
	Add docstrings from defunct doc/guile-pg.texi.
	* libpostgres_lo.c: Likewise.

	* configure.in (AM_MAINTAINER_MODE, AC_CONFIG_COMMANDS): New.
	* Makefile.am (SUBDIRS): Put doc/ last.
	(SUFFIXES): Add ".doc".
	(snarfcppopts): New refactor var.
	(.c.doc, .scm.doc): New rules.
	(DISTCLEANFILES): Add "*.doc".
	(DOTDOCFILES): New var, when MAINTAINER_MODE.
	(.doc-index): New target, when MAINTAINER_MODE.

	* doc/Makefile.am: All these in "if MAINTAINER_MODE" block:
	(BUILT_SOURCES): New directive.
	(.twerp.texi): New rule.
	(twerp.mk-am-frag): New "include".
	(EXTRA_DIST): Add guile-pg.twerp and twerp.mk-am-frag.

	* doc/guile-pg.texi: Now generated.

2002-12-22  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* autogen.sh: Add recursive invocation of ".make-automake-frags".
	Before running automake, check if doc/guile-pg.texi exists.
	If not, fake one suitable for automake, w/ timestamp January 1.

2002-12-22  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-types.scm (oid-type-name-cache): New proc, exported.

2002-12-22  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c (pgrs): Move PGRES_TUPLES_OK first.

2002-12-22  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/guile-pg.texi (Miscellaneous): Add intro blurb.

2002-12-21  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in: Add check for `terminating' in libguile; define
	HAVE_LIBGUILE_TERMINATING in config.h if available.

	* libpostgres_lo.c: When not HAVE_SCM_TERMINATING, only declare
	`terminating' if also HAVE_LIBGUILE_TERMINATING.
	(lob_flush): On error, if neither HAVE_SCM_TERMINATING nor
	HAVE_LIBGUILE_TERMINATING, unconditionally write to stderr.

2002-12-20  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 0.12 for release.

2002-12-20  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/Makefile.am (EXTRA_DIST): Add $(guile_postgres_sources).

2002-12-20  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/guile-pg.texi (Types Conversion,
	Single-Table Abstraction): New nodes/chapters.

2002-12-20  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-types.scm (dbcoltypes): New proc, exported.

2002-12-20  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-table.scm: New file.
	* scm/Makefile.am (guile_postgres_sources): Add postgres-table.scm.

2002-12-20  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres-types.scm: New file.
	* scm/Makefile.am (guile_postgres_sources): Add postgres-types.scm.

2002-12-19  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* HACKING: Mention test/cov.

2002-12-17  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/Makefile.am (EXTRA_DIST): New var.

2002-12-17  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/Makefile.am (dist-hook): New directive.

2002-12-17  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 0.11 for release.

2002-12-17  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (HAVE_SCM_TERMINATING): Arrange to define this
	config.h macro if libguile.h declares `scm_terminating'.

	* libpostgres_lo.c (scm_terminating): Rename from `terminating',
	but only declare if HAVE_SCM_TERMINATING is not defined.  Use
	"extern int" in that case.

2002-12-16  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* THANKS: New file.
	* Makefile.am (EXTRA_DIST): Add THANKS.

2002-12-16  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in: Add multiple checks for `InvalidOid' decl.
	Signal error if not found.

	* libpostgres.c (INVALIDOID_HEADER): #include this if defined.

2002-12-16  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* acinclude.m4: Use m4 quoting (square braces)
	instead of shell quoting (double quotes).

2002-12-14  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* Makefile.am (EXTRA_DIST): Add contrib.
	(dist-hook): New directive.

	* configure.in (VERSION): Bump to 0.10 for release.

2002-12-14  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres_lo.c (lob_seek): Only adjust return value on SEEK_CUR.
	(lob_lo_seek): No longer construct args for, or
	call, `lo_lseek'; use `lob_seek' instead.

2002-12-14  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* autogen.sh: Invoke "libtoolize --force" if no ltmain.sh in cwd.

2002-12-14  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres_lo.c (lob_seek): Adjust return value by the amount
	in the port's read-buffer between the read_pos and read_end.

	* guile-pg-lo-tests.scm.in (test:lo-tell): New proc, run by `test'.
	(test:make-connection): Use `->bool' instead of `if'.
	(test:lo-open-read): Also test `pg-lo-get-connection'.

2002-12-13  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/cov: New maintenance script.

2002-12-13  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c (MAX_SSI): Delete macro.
	(ser_status_str, ser_status_str_count, ser_status): Delete vars.
	(pgrs_t): New typedef.
	(pgrs, pgrs_count): New vars, static.
	(ser_display): Replace `ser_status' and `ser_status_str' lookup
	with `pgrs' lookup.
	(str2symbol): Delete macro.
	(pg_result_status): No longer create symbol; use `pgrs' for lookup.
	(init_postgres): No longer define PGRES_* vars.
	Instead, initialize `sym' field in `pgrs'.

2002-12-13  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c, libpostres_lo.c: Refill; nfc.

2002-12-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 0.09 for release.

2002-12-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* scm/postgres.scm.in (PGRES_EMPTY_QUERY, PGRES_COMMAND_OK,
	PGRES_TUPLES_OK, PGRES_COPY_OUT, PGRES_COPY_IN,
	PGRES_BAD_RESPONSE, PGRES_NONFATAL_ERROR, PGRES_FATAL_ERROR):
	New vars, exported.

2002-12-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/guile-pg.texi (Concept Index): Comment out node.
	(Programming Interface): Delete node; move children up.

2002-12-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/guile-pg.texi: Rewrite "function" as "procedure".
	Replace @defun with "@deffn {Scheme Procedure}".
	Convert	"returns" -> "return" and so on.
	Move "Miscellaneous" after the other peer sections.
	Refill @lisp examples.

2002-12-12  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* doc/guile-pg.texi: Update copyright.
	Refill; nfc.

2002-12-11  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* configure.in (VERSION): Bump to 0.08 for release.

2002-12-11  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* libpostgres.c: Update copyright.
	No longer #include <postgres.h>.
	Include libpostgres.h using "" instead of <>.

	(rcsid): Delete.
	(ser_status_str_count): New var.
	(pg_guile_pg_rcsid): Delete.
	(str2symbol): New macro.
	(pg_result_status): Return symbol if available.

	* libpostgres_lo.c: Update copyright.

	(rcsid): Delete.
	(pg_guile_pg_lo_rcsid): Delete.
	(TTN_COERCE_INT): New macro.
	(lob_mklobport): Use SCM_INPUT_PORT_P instead of SCM_INPORTP.
	Use SCM_OUTPUT_PORT_P instead of SCM_OUTPORTP.
	Use TTN_COERCE_INT.
	(terminating): Make static.
	(lob_write): Use TTN_COERCE_INT.

	* scm/postgres.scm.in: Update copyright.
	Rework loading to use `make-app-module-loader' if available,
	emulating it if not.

	(pg-setdb): New export.
	(pg-guile-pg-module-rcsid, pg-guile-pg-rcsid): Delete.

	* scm/Makefile.am: Update copyright.

	(install-data-hook): New target.

	* doc/guile-pg.texi: Update pg-result-status docs and examples.

2002-12-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* acinclude.m4 (GUILE_MODULE): Delete.

	* configure.in: No longer use GUILE_MODULE.
	Instead, use GUILE_PROGS and GUILE_FLAGS.

2002-12-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* HACKING: Remove RCS tag.
	Refill.
	Add "Quick start" commands.
	Update "I" to "we".
	Remove hints available elsewhere.

	* README: Update tested PostgreSQL version number.
	Update bug report email address.

2002-12-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* guile-pg.h, guile-pg.c: Delete.

	* Makefile.am: Update copyright.
	(EXTRA_DIST): Add autogen.sh.
	(bin_PROGRAMS, guile_pg_SOURCES, guile_pg_LDADD, guile_pg_CFLAGS,
	guile_pg_LDFLAGS): Delete.
	(INCLUDES): Add "-I.".
	(pkglibversdir): New var.
	(pkglibvers_LTLIBRARIES): Renamed from `lib_LTLIBRARIES'.
	(.c.x): Update guile-snarf invocation to use "-o OUT IN" syntax.
	(CLEANFILES): New directive.

	* configure.in: Update copyright.
	(top_builddir_absolute): New var, AC_SUBST'd.
	(AC_INIT): Look for libpostgres.c instead of guile-pg.c.
	(AC_INIT_AUTOMAKE): Use version 0.07u8 to indicate "under development".

2002-12-05  Thien-Thi Nguyen  <ttn@giblet.glug.org>

	* acconfig.h, aclocal.m4, configure, Makefile.in, INSTALL, ANNOUNCE,
	config.guess, config.h.in, config.sub, install-sh, ltmain.sh,
	missing, mkinstalldirs, stamp-h.in, doc/Makefile.in, doc/texinfo.tex,
	scm/Makefile.in: Delete.

	* autogen.sh: Take "--libtoolize" option;
	conditionalize libtoolize invocation.
	Pass "-I ." to aclocal.
	Pass "--force" to automake.
	Record dev box tool versions in comment.

2000-06-20  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* libpostgres.c: Fixed use of soon-to-be-deprecated
	  scm_make_smob_type_mfpe.

2000-06-15  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* libpostgres.c: Fixed use of deprecated scm_smobfuns struct.

	* libpostgres.c, configure.in, doc/guile-pg.texi:
	  Added pg-oid-value function.

2000-06-02  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* ANNOUNCE: New file.

	* Bumped libtool interface number to 2 prior to release.

	* Printing a large object port now gives information about the
	  libpq file descriptor, the OID and the database connection to
	  which the port applies.

	* Fixed buffer overflow in print methods for connection and
	  results smobs.

	* Fixed fill_input bug and lob_printp of closed port.

	* Added test case for read-line (would've caught fill_input bug)

	* Changed libtool to new version 1.3.5

	* Updated autogen.sh

2000-05-30  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* Fixed large object ports so that they work with the further
	  changes to the ports interface.

	  Note: because of this, guile-pg no-longer builds with guile
	  versions prior to 1.3.4

	* Changed all function names from pg:name to pg-name.  This
	  removes the need for a hacked texi2html so that is now gone.

	* Removed pq-setdb  entirely.  It has been replaced by
	  pq-connectdb which is much more flexible.

	* Changed the installation directory of libpostgres.so.  This
	  used to be in an architecture dependent subdirectory, with a
	  symbolic link from an architecture-independent directory, but
	  this was still not compatible with multiple architectures.
	  Instead we install the .so in the $(library) directory and
	  load it explicitly using the scheme interface to dlopen etc.

	* As part of the above, the module is now loaded using

	         (use-modules (database postgres))

	* Addded procedure pg-guile-pg-loaded.  This is a marker, the
	  presence of which guarantees that guile-pg is present.  This
	  is tested in postgres.scm to see whether the guile is plain
	  guile or the statically-linked guile-pg.

	* Updated README

	* Added <Dollar>Id<Dollar> all over the place in preparation
	  for CVS use.  Also added PG-MODULE-RCSID procedure to get
	  the RCS Id of the scheme module (postgres.scm).

1999-06-27  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* Changes to configure.in to check for Postgres 6.4 features.

	* Changes to libpostgres.c to conditionally compile procedures
	  depending on post 6.4 functionality in libpq.

	* Split libpostgres.c into two files. Added libpostgres_lo.c
	  containing the large object code.

	* Changes to libpostgres_lo.c to deal with Guile's new ptobfuns
	  interface. Changes to configure.in to detect the new ptobfuns
	  interface.

1999-01-31  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* Changes to work with libpq from PostgreSQL 6.4.2 these were:

	* libpostgres.c: Added new primitives pg:binary-tuples? and pg:fmod.
	  Changed pg:error-message to work with either a PG-CONN or a
	  PG-RESULT object, calling PQresultErrorMessage in the latter case

	  Changed pg:getvalue to work with binary data. Now PQbinaryTuples
	  is called to check whether the returned value is binary and
	  if it is a string of the appropriate length is returned.

	  Changed pg:putline so that it actually calls PQputnbytes with
	  the correct length. This works with null-terminated strings
	  as it did before, but now works with strings containing embedded
	  nulls as well.

	* Makefile.am: Added -lcrypt to the dependency list for libpostgres.so
	  This is actually wrong though: -lcrypt should only be linked if
	  necessary, since it doesn't exist on some systems. We need to
	  check whether or not it exists in configure.in and only if does
	  should we include it. I don't have enough brains to do this
	  right now though.

1999-01-24  Ian Grant  <Ian.Grant@cl.cam.ac.uk>

	* HACKING: New File.

	* README: Added info on building guile-pg and intalling
	  PostgreSQL from the Red Hat RPMS.

	* Makefile.am, configure.in: Added test subdirectory.

1999-01-17  Ian Grant  <I.A.N.Grant@damtp.cam.ac.uk>

	* acinclude.m4: Added new macro definition GUILE_MODULE
	  which sets up the necessary install targets for a guile
	  module. It gets these from guile-config.

	* configure.in: Changed to use GUILE_MODULE.

	* libpostgres.c: Changed all scheme i/f functions to use
	  guile-snarf to make libpostgres.x

	* Makefile.am: Added lines to allow .x in .deps and to run
	  guile-snarf to create the .x files when necessary.

	* libpostgres.c: Added pg:reset and pg:trace and pg:untrace

1999-01-12  Ian Grant  <I.A.N.Grant@damtp.cam.ac.uk>

	* libpostgres.c: Completed large obect support

	* libpostgres.c: Added support for PQputline/PQgetline/PQendcopy

	* doc/guile-pg.texi: Function descriptions

1998-12-05  Ian Grant  <I.A.N.Grant@damtp.cam.ac.uk>

	* libtoolized

	* acinclude.m4: new file defining PQ library autoconf macro

1998-12-03  Ian Grant  <I.A.N.Grant@damtp.cam.ac.uk>

	* AUTHORS: New file, in accordance with the GNU maintainers'
	standards.

	* README: New file, in accordance with the GNU maintainers'
	standards.

	* Makefile.am: New file for automake.

	* configure.in and friends: new files for autoconf.
